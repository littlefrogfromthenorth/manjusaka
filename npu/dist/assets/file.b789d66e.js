var zt=Object.defineProperty,Wt=Object.defineProperties;var Gt=Object.getOwnPropertyDescriptors;var tt=Object.getOwnPropertySymbols;var Yt=Object.prototype.hasOwnProperty,Zt=Object.prototype.propertyIsEnumerable;var rt=Math.pow,nt=(e,t,n)=>t in e?zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))Yt.call(t,n)&&nt(e,n,t[n]);if(tt)for(var n of tt(t))Zt.call(t,n)&&nt(e,n,t[n]);return e},ce=(e,t)=>Wt(e,Gt(t));var Q=(e,t,n)=>new Promise((r,a)=>{var l=y=>{try{o(n.next(y))}catch(p){a(p)}},s=y=>{try{o(n.throw(y))}catch(p){a(p)}},o=y=>y.done?r(y.value):Promise.resolve(y.value).then(l,s);o((n=n.apply(e,t)).next())});import{eb as fe,J as Xt,ec as Ot,ed as Le,ag as He,k as g,aH as Se,b as le,ak as Kt,_ as A,S as wt,an as At,a6 as Jt,ad as Qt,c8 as be,c6 as Ft,c3 as xe,V as Ct,M as at,X as Ie,af as d,H as re,a7 as en,ah as tn,c9 as De,ee as nn,ef as rn,ao as an,eg as ln,eh as sn,ap as cn,cG as on,cx as lt,ei as un,c$ as dn,bM as Dt,aP as ae,d8 as fn,cR as hn,aS as ne,I as pn,aL as C,u as yn,r as B,c as R,Z as te,aQ as $t,bk as mn,aR as P,o as N,z as oe,b9 as vn,C as ee,i as ke,j as M,m as z,t as Ne,F as gn,W as _e,aV as bn,aT as he,bb as kn,a as _,a9 as it,ej as st,am as Ve,a2 as Ue,cb as Mt,ek as xn,el as _n,b8 as Sn,f as je,x as Tn,aY as ue,c_ as En,ai as ct,b3 as $e,em as On,d2 as Kn,aa as de,dZ as ot,w as ut,v as dt,bx as wn,en as ft,eo as An,bg as ht,d9 as Fn,dM as Cn,b0 as Dn,bR as $n,s as Mn,l as Me,n as Pn,ep as Bn,cj as q,q as Ln}from"./index.ecaec58b.js";import{a as In}from"./index.7c437fb2.js";import{c as Nn,C as jn,B as Rn,u as Hn}from"./useTable.64ef5827.js";import{q as qe,r as Vn,s as Pt,t as Bt,v as Un,w as qn,T as zn,U as Wn,x as Gn}from"./useForm.77c27927.js";import{D as Yn}from"./index.42eff1d5.js";import{g as Pe}from"./_baseIteratee.95e39a32.js";import{d as Zn}from"./download.0a6ebd5a.js";import{B as Xn,a as pt}from"./index.e472a703.js";import"./index.81d2e3e6.js";import"./index.9c3be20b.js";import"./useSize.37dbc3ba.js";import"./useContentViewHeight.33e9d1e7.js";import"./ArrowLeftOutlined.68372d7a.js";import"./index.d2065cf3.js";import"./FullscreenOutlined.fdf277a8.js";import"./index.84bf6fd3.js";import"./index.c74c0e50.js";import"./isEqual.07d69833.js";import"./useSortable.d7a4a5d8.js";import"./index.5adf4b72.js";import"./index.66a07c9f.js";import"./scrollTo.3f609abf.js";import"./index.09531035.js";var Lt=fe.endEvents.length!==0,Jn=["Webkit","Moz","O","ms"],yt=["-webkit-","-moz-","-o-","ms-",""];function ge(e,t){for(var n=window.getComputedStyle(e,null),r="",a=0;a<yt.length&&(r=n.getPropertyValue(yt[a]+t),!r);a++);return r}function It(e){if(Lt){var t=parseFloat(ge(e,"transition-delay"))||0,n=parseFloat(ge(e,"transition-duration"))||0,r=parseFloat(ge(e,"animation-delay"))||0,a=parseFloat(ge(e,"animation-duration"))||0,l=Math.max(n+t,a+r);e.rcEndAnimTimeout=setTimeout(function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()},l*1e3+200)}}function Nt(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}var Te=function(t,n,r){var a=Xt(n)==="object",l=a?n.name:n,s=a?n.active:"".concat(n,"-active"),o=r,y,p,i=Nn(t);return r&&Object.prototype.toString.call(r)==="[object Object]"&&(o=r.end,y=r.start,p=r.active),t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(f){f&&f.target!==t||(t.rcAnimTimeout&&(Ot(t.rcAnimTimeout),t.rcAnimTimeout=null),Nt(t),i.remove(l),i.remove(s),fe.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,o&&o())},fe.addEndEventListener(t,t.rcEndListener),y&&y(),i.add(l),t.rcAnimTimeout=Le(function(){t.rcAnimTimeout=null,i.add(l),i.add(s),p&&Le(p,0),It(t)},30),{stop:function(){t.rcEndListener&&t.rcEndListener()}}};Te.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(r){r&&r.target!==e||(e.rcAnimTimeout&&(Ot(e.rcAnimTimeout),e.rcAnimTimeout=null),Nt(e),fe.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},fe.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=Le(function(){for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r]);e.rcAnimTimeout=null,It(e)},0)};Te.setTransition=function(e,t,n){var r=t,a=n;n===void 0&&(a=r,r=""),r=r||"",Jn.forEach(function(l){e.style["".concat(l,"Transition").concat(r)]=a})};Te.isCssAnimationSupported=Lt;var Qn=Te;function mt(e,t,n){var r,a,l;return Qn(e,"ant-motion-collapse-legacy",{start:function(){l&&cancelAnimationFrame(l),t?(r=e.offsetHeight,r===0?l=requestAnimationFrame(function(){r=e.offsetHeight,e.style.height="0px",e.style.opacity="0"}):(e.style.height="0px",e.style.opacity="0")):(e.style.height="".concat(e.offsetHeight,"px"),e.style.opacity="1")},active:function(){a&&cancelAnimationFrame(a),a=requestAnimationFrame(function(){e.style.height="".concat(t?r:0,"px"),e.style.opacity=t?"1":"0"})},end:function(){l&&cancelAnimationFrame(l),a&&cancelAnimationFrame(a),e.style.height="",e.style.opacity="",n&&n()}})}var er={onEnter:function(t,n){He(function(){mt(t,!0,n)})},onLeave:function(t,n){return mt(t,!1,n)}},tr=er,nr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},rr=nr;function vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){ar(e,a,n[a])})}return e}function ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=function(t,n){var r=vt({},t,n.attrs);return g(Se,vt({},r,{icon:rr}),null)};ze.displayName="MinusSquareOutlined";ze.inheritAttrs=!1;var lr=ze,ir={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},sr=ir;function gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){cr(e,a,n[a])})}return e}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=function(t,n){var r=gt({},t,n.attrs);return g(Se,gt({},r,{icon:sr}),null)};We.displayName="PlusSquareOutlined";We.inheritAttrs=!1;var or=We;qe.TreeNode=Vn;var bt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},ur=qe.TreeNode;function jt(){return{showLine:d.looseBool,multiple:d.looseBool,autoExpandParent:d.looseBool,checkStrictly:d.looseBool,checkable:d.looseBool,disabled:d.looseBool,defaultExpandAll:d.looseBool,defaultExpandParent:d.looseBool,defaultExpandedKeys:d.arrayOf(d.oneOfType([d.string,d.number])),expandedKeys:d.arrayOf(d.oneOfType([d.string,d.number])),checkedKeys:d.oneOfType([d.arrayOf(d.oneOfType([d.string,d.number])),d.shape({checked:d.arrayOf(d.oneOfType([d.string,d.number])),halfChecked:d.arrayOf(d.oneOfType([d.string,d.number]))}).loose]),defaultCheckedKeys:d.arrayOf(d.oneOfType([d.string,d.number])),selectedKeys:d.arrayOf(d.oneOfType([d.string,d.number])),defaultSelectedKeys:d.arrayOf(d.oneOfType([d.string,d.number])),selectable:d.looseBool,filterAntTreeNode:d.func,loadData:d.func,loadedKeys:d.arrayOf(d.oneOfType([d.string,d.number])),draggable:d.looseBool,showIcon:d.looseBool,icon:d.func,switcherIcon:d.any,prefixCls:d.string,filterTreeNode:d.func,openAnimation:d.any,treeData:{type:Array},replaceFields:d.object,blockNode:d.looseBool,onExpand:d.func,onCheck:d.func,onSelect:d.func,onClick:d.func,onDoubleclick:d.func,onDblclick:d.func,"onUpdate:selectedKeys":d.func,"onUpdate:checkedKeys":d.func,"onUpdate:expandedKeys":d.func}}var L=le({name:"ATree",inheritAttrs:!1,props:Kt(jt(),{checkable:!1,showIcon:!1,openAnimation:A(A({},tr),{appear:null}),blockNode:!1}),setup:function(){return{tree:null,configProvider:wt("configProvider",At)}},TreeNode:ur,methods:{renderSwitcherIcon:function(t,n,r){var a=r.isLeaf,l=r.loading,s=r.expanded,o=this.$props.showLine;if(l)return g(Jt,{class:"".concat(t,"-switcher-loading-icon")},null);if(a)return o?g(Pt,{class:"".concat(t,"-switcher-line-icon")},null):null;var y="".concat(t,"-switcher-icon");return n?Qt(n,{class:y}):o?s?g(lr,{class:"".concat(t,"-switcher-line-icon")},null):g(or,{class:"".concat(t,"-switcher-line-icon")},null):g(jn,{class:y},null)},updateTreeData:function(t){var n=this,r=this.$slots,a={children:"children",title:"title",key:"key"},l=A(A({},a),this.$props.replaceFields);return t.map(function(s){var o=s[l.key],y=s[l.children],p=s.slots,i=p===void 0?{}:p,f=s.class,h=s.style,u=bt(s,["slots","class","style"]),b=A(A({},u),{icon:r[i.icon]||u.icon,switcherIcon:r[i.switcherIcon]||u.switcherIcon,title:r[i.title]||r.title||u[l.title],dataRef:s,key:o,class:f,style:h});return y?A(A({},b),{children:n.updateTreeData(y)}):b})},setTreeRef:function(t){this.tree=t},handleCheck:function(t,n){this.$emit("update:checkedKeys",t),this.$emit("check",t,n)},handleExpand:function(t,n){this.$emit("update:expandedKeys",t),this.$emit("expand",t,n)},handleSelect:function(t,n){this.$emit("update:selectedKeys",t),this.$emit("select",t,n)}},render:function(){var t=this,n,r=be(this),a=r.prefixCls,l=r.showIcon,s=r.treeNodes,o=r.blockNode,y=this.configProvider.getPrefixCls,p=y("tree",a),i=Ft(this,"switcherIcon"),f=r.checkable,h=r.treeData||s;h&&(h=this.updateTreeData(h));var u=this.$attrs,b=u.class,v=bt(u,["class"]),k=A(A(A(A({},r),{prefixCls:p,checkable:f&&g("span",{class:"".concat(p,"-checkbox-inner")},null),children:xe(this),switcherIcon:function(F){return t.renderSwitcherIcon(p,i,F)},ref:this.setTreeRef}),v),{class:Ct(b,(n={},at(n,"".concat(p,"-icon-hide"),!l),at(n,"".concat(p,"-block-node"),o),n)),onCheck:this.handleCheck,onExpand:this.handleExpand,onSelect:this.handleSelect});return h&&(k.treeData=h),g(qe,Ie(Ie({},k),{},{__propsSymbol__:[]}),null)}}),dr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},fr=dr;function kt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){hr(e,a,n[a])})}return e}function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ge=function(t,n){var r=kt({},t,n.attrs);return g(Se,kt({},r,{icon:fr}),null)};Ge.displayName="FolderOpenOutlined";Ge.inheritAttrs=!1;var pr=Ge,yr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},mr=yr;function xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){vr(e,a,n[a])})}return e}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=function(t,n){var r=xt({},t,n.attrs);return g(Se,xt({},r,{icon:mr}),null)};Ye.displayName="FolderOutlined";Ye.inheritAttrs=!1;var gr=Ye,j;(function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"})(j||(j={}));function Ze(e,t){var n=Un(e)||[];function r(a){var l=a.key,s=xe(a);t(l,a)!==!1&&Ze(s,t)}n.forEach(r)}function br(e){var t=Bt(e),n=t.keyEntities;return re(n.keys())}function kr(e,t,n,r){var a=[],l=j.None;if(n&&n===r)return[n];if(!n||!r)return[];function s(o){return o===n||o===r}return Ze(e,function(o){if(l===j.End)return!1;if(s(o)){if(a.push(o),l===j.None)l=j.Start;else if(l===j.Start)return l=j.End,!1}else l===j.Start&&a.push(o);return t.indexOf(o)!==-1}),a}function _t(e,t){var n=re(t),r=[];return Ze(e,function(a,l){var s=n.indexOf(a);return s!==-1&&(r.push(l),n.splice(s,1)),!!n.length}),r}function Rt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=t.key,a=r===void 0?"key":r,l=t.children,s=l===void 0?"children":l;return(e||[]).forEach(function(o){n.push(o[a]),o[s]&&(n=[].concat(re(n),re(Rt(o[s],t))))}),n}var St=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function xr(e){var t=e.isLeaf,n=e.expanded;return t?g(Pt,null,null):n?g(pr,null,null):g(gr,null,null)}var Re=le({name:"ADirectoryTree",mixins:[en],inheritAttrs:!1,props:Kt(A(A({},jt()),{expandAction:d.oneOf([!1,"click","doubleclick","dblclick"])}),{showIcon:!0,expandAction:"click"}),setup:function(){return{children:null,onDebounceExpand:null,tree:null,lastSelectedKey:"",cachedSelectedKeys:[],configProvider:wt("configProvider",At)}},data:function(){var t=be(this),n=t.defaultExpandAll,r=t.defaultExpandParent,a=t.expandedKeys,l=t.defaultExpandedKeys,s=xe(this),o=Bt(s),y=o.keyEntities,p={};return p._selectedKeys=t.selectedKeys||t.defaultSelectedKeys||[],n?t.treeData?p._expandedKeys=Rt(t.treeData,t.replaceFields):p._expandedKeys=br(s):r?p._expandedKeys=qn(a||l,y):p._expandedKeys=a||l,A({_selectedKeys:[],_expandedKeys:[]},p)},watch:{expandedKeys:function(t){this.setState({_expandedKeys:t})},selectedKeys:function(t){this.setState({_selectedKeys:t})}},created:function(){this.onDebounceExpand=tn(this.expandFolderNode,200,{leading:!0})},methods:{handleExpand:function(t,n){this.setUncontrolledState({_expandedKeys:t}),this.$emit("update:expandedKeys",t),this.$emit("expand",t,n)},handleClick:function(t,n){var r=this.$props.expandAction;r==="click"&&this.onDebounceExpand(t,n),this.$emit("click",t,n)},handleDoubleClick:function(t,n){var r=this.$props.expandAction;(r==="dblclick"||r==="doubleclick")&&this.onDebounceExpand(t,n),this.$emit("doubleclick",t,n),this.$emit("dblclick",t,n)},hanldeSelect:function(t,n){var r=this.$props.multiple,a=this.children||[],l=this.$data._expandedKeys,s=l===void 0?[]:l,o=n.node,y=n.nativeEvent,p=o.eventKey,i=p===void 0?"":p,f={},h=A(A({},n),{selected:!0}),u=y.ctrlKey||y.metaKey,b=y.shiftKey,v;r&&u?(v=t,this.lastSelectedKey=i,this.cachedSelectedKeys=v,h.selectedNodes=_t(a,v)):r&&b?(v=Array.from(new Set([].concat(re(this.cachedSelectedKeys||[]),re(kr(a,s,i,this.lastSelectedKey))))),h.selectedNodes=_t(a,v)):(v=[i],this.lastSelectedKey=i,this.cachedSelectedKeys=v,h.selectedNodes=[n.node]),f._selectedKeys=v,this.$emit("update:selectedKeys",v),this.$emit("select",v,h),this.setUncontrolledState(f)},setTreeRef:function(t){this.tree=t},expandFolderNode:function(t,n){var r=n.isLeaf;if(!(r||t.shiftKey||t.metaKey||t.ctrlKey)&&this.tree.tree){var a=this.tree.tree;a.onNodeExpand(t,n)}},setUncontrolledState:function(t){var n=De(t,Object.keys(be(this)).map(function(r){return"_".concat(r)}));Object.keys(n).length&&this.setState(n)},handleCheck:function(t,n){this.$emit("update:checkedKeys",t),this.$emit("check",t,n)}},render:function(){var t=this;this.children=xe(this);var n=be(this),r=n.prefixCls,a=St(n,["prefixCls"]),l=this.configProvider.getPrefixCls,s=l("tree",r),o=this.$data,y=o._expandedKeys,p=o._selectedKeys,i=this.$attrs,f=i.class,h=St(i,["class"]),u=Ct("".concat(s,"-directory"),f),b=A(A(A({icon:xr},h),De(a,["onUpdate:selectedKeys","onUpdate:checkedKeys","onUpdate:expandedKeys"])),{prefixCls:s,expandedKeys:y,selectedKeys:p,switcherIcon:Ft(this,"switcherIcon"),ref:this.setTreeRef,class:u,onSelect:this.hanldeSelect,onClick:this.handleClick,onDblclick:this.handleDoubleClick,onExpand:this.handleExpand,onCheck:this.handleCheck});return g(L,b,Ie({default:function(){return[t.children]}},De(this.$slots,["default"])))}});L.TreeNode.name="ATreeNode";L.DirectoryTree=Re;L.install=function(e){return e.component(L.name,L),e.component(L.TreeNode.name,L.TreeNode),e.component(Re.name,Re),e};L.TreeNode;var _r=200;function Sr(e,t,n,r){var a=-1,l=ln,s=!0,o=e.length,y=[],p=t.length;if(!o)return y;n&&(t=nn(t,rn(n))),r?(l=sn,s=!1):t.length>=_r&&(l=cn,s=!1,t=new an(t));e:for(;++a<o;){var i=e[a],f=n==null?i:n(i);if(i=r||i!==0?i:0,s&&f===f){for(var h=p;h--;)if(t[h]===f)continue e;y.push(i)}else l(t,f,r)||y.push(i)}return y}var Tr=on(function(e,t){return lt(e)?Sr(e,un(t,1,lt,!0)):[]}),Er=Tr;const Or=({icon:e})=>e?dn(e)?Dt(ae,{icon:e,class:"mr-1"}):ae:null;const Kr=le({name:"BasicTreeHeader",components:{BasicTitle:fn,Icon:ae,Dropdown:hn,Menu:ne,MenuItem:ne.Item,MenuDivider:ne.Divider,InputSearch:pn.Search},props:{helpMessage:{type:[String,Array],default:""},title:C.string,toolbar:C.bool,checkable:C.bool,search:C.bool,checkAll:C.func,expandAll:C.func,searchText:C.string},emits:["strictly-change","search"],setup(e,{emit:t,slots:n}){const{t:r}=yn(),a=B(""),l=R(()=>{const i=n.headerTitle||e.title;return["mr-1","w-full",{["ml-5"]:i}]}),s=R(()=>{const{checkable:i}=e,f=[{label:r("component.tree.expandAll"),value:2},{label:r("component.tree.unExpandAll"),value:3,divider:i}];return i?[{label:r("component.tree.selectAll"),value:0},{label:r("component.tree.unSelectAll"),value:1,divider:i},...f,{label:r("component.tree.checkStrictly"),value:4},{label:r("component.tree.checkUnStrictly"),value:5}]:f});function o(i){var h,u,b,v;const{key:f}=i;switch(f){case 0:(h=e.checkAll)==null||h.call(e,!0);break;case 1:(u=e.checkAll)==null||u.call(e,!1);break;case 2:(b=e.expandAll)==null||b.call(e,!0);break;case 3:(v=e.expandAll)==null||v.call(e,!1);break;case 4:t("strictly-change",!1);break;case 5:t("strictly-change",!0);break}}function y(i){t("search",i)}const p=mn(y,200);return te(()=>a.value,i=>{p(i)}),te(()=>e.searchText,i=>{i!==a.value&&(a.value=i)}),{t:r,toolbarList:s,handleMenuClick:o,searchValue:a,getInputSearchCls:l}}}),wr={class:"flex px-2 py-1.5 items-center basic-tree-header"},Ar={key:2,class:"flex flex-1 justify-self-stretch items-center cursor-pointer"};function Fr(e,t,n,r,a,l){const s=P("BasicTitle"),o=P("InputSearch"),y=P("Icon"),p=P("MenuItem"),i=P("MenuDivider"),f=P("Menu"),h=P("Dropdown");return N(),oe("div",wr,[e.$slots.headerTitle?vn(e.$slots,"headerTitle",{key:0},void 0,!0):ee("",!0),!e.$slots.headerTitle&&e.title?(N(),ke(s,{key:1,helpMessage:e.helpMessage},{default:M(()=>[z(Ne(e.title),1)]),_:1},8,["helpMessage"])):ee("",!0),e.search||e.toolbar?(N(),oe("div",Ar,[e.search?(N(),oe("div",{key:0,class:gn(e.getInputSearchCls)},[g(o,{placeholder:e.t("common.searchText"),size:"small",allowClear:"",value:e.searchValue,"onUpdate:value":t[0]||(t[0]=u=>e.searchValue=u)},null,8,["placeholder","value"])],2)):ee("",!0),e.toolbar?(N(),ke(h,{key:1,onClick:t[1]||(t[1]=kn(()=>{},["prevent"]))},{overlay:M(()=>[g(f,{onClick:e.handleMenuClick},{default:M(()=>[(N(!0),oe(_e,null,bn(e.toolbarList,u=>(N(),oe(_e,{key:u.value},[g(p,he({ref_for:!0},{key:u.value}),{default:M(()=>[z(Ne(u.label),1)]),_:2},1040),u.divider?(N(),ke(i,{key:0})):ee("",!0)],64))),128))]),_:1},8,["onClick"])]),default:M(()=>[g(y,{icon:"ion:ellipsis-vertical"})]),_:1})):ee("",!0)])):ee("",!0)])}var Cr=$t(Kr,[["render",Fr],["__scopeId","data-v-c81d0724"]]);function Dr(e,t){function n(i){const f=[],h=i||_(e),{key:u,children:b}=_(t);if(!b||!u)return f;for(let v=0;v<h.length;v++){const k=h[v];f.push(k[u]);const O=k[b];O&&O.length&&f.push(...n(O))}return f}function r(i){const f=[],h=i||_(e),{key:u,children:b}=_(t);if(!b||!u)return f;for(let v=0;v<h.length;v++){const k=h[v];k.disabled!==!0&&k.selectable!==!1&&f.push(k[u]);const O=k[b];O&&O.length&&f.push(...r(O))}return f}function a(i,f){const h=[],u=f||_(e),{key:b,children:v}=_(t);if(!v||!b)return h;for(let k=0;k<u.length;k++){const O=u[k],F=O[v];i===O[b]?(h.push(O[b]),F&&F.length&&h.push(...n(F))):F&&F.length&&h.push(...a(i,F))}return h}function l(i,f,h){if(!i)return;const u=h||_(e),{key:b,children:v}=_(t);if(!(!v||!b))for(let k=0;k<u.length;k++){const O=u[k],F=O[v];if(O[b]===i){u[k]=I(I({},u[k]),f);break}else F&&F.length&&l(i,f,O[v])}}function s(i=1,f,h=1){if(!i)return[];const u=[],b=f||_(e)||[];for(let v=0;v<b.length;v++){const k=b[v],{key:O,children:F}=_(t),ie=O?k[O]:"",H=F?k[F]:[];u.push(ie),H&&H.length&&h<i&&(h+=1,u.push(...s(i,H,h)))}return u}function o({parentKey:i=null,node:f,push:h="push"}){const u=it(_(e));if(!i){u[h](f),e.value=u;return}const{key:b,children:v}=_(t);!v||!b||(st(u,k=>{if(k[b]===i)return k[v]=k[v]||[],k[v][h](f),!0}),e.value=u)}function y({parentKey:i=null,list:f,push:h="push"}){const u=it(_(e));if(!(!f||f.length<1))if(i){const{key:b,children:v}=_(t);if(!v||!b)return;st(u,k=>{if(k[b]===i){k[v]=k[v]||[];for(let O=0;O<f.length;O++)k[v][h](f[O]);return e.value=u,!0}})}else for(let b=0;b<f.length;b++)u[h](f[b])}function p(i,f){if(!i)return;const h=f||_(e),{key:u,children:b}=_(t);if(!(!b||!u))for(let v=0;v<h.length;v++){const k=h[v],O=k[b];if(k[u]===i){h.splice(v,1);break}else O&&O.length&&p(i,k[b])}}return{deleteNodeByKey:p,insertNodeByKey:o,insertNodesByKey:y,filterByLevel:s,updateNodeByKey:l,getAllKeys:n,getChildrenKeys:a,getEnabledKeys:r}}function $r(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Mt(e)}const Be="context-menu",Mr={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},Tt=e=>{const{item:t}=e;return g("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&g(ae,{class:"mr-2",icon:t.icon},null),g("span",null,[t.label])])};var Pr=le({name:"ContextMenu",props:Mr,setup(e){const t=B(null),n=B(!1),r=R(()=>{const{axis:s,items:o,styles:y,width:p}=e,{x:i,y:f}=s||{x:0,y:0},h=(o||[]).length*40,u=p,b=document.body,v=b.clientWidth<i+u?i-u:i,k=b.clientHeight<f+h?f-h:f;return ce(I({},y),{width:`${p}px`,left:`${v+1}px`,top:`${k+1}px`})});Ve(()=>{He(()=>n.value=!0)}),Ue(()=>{const s=_(t);s&&document.body.removeChild(s)});function a(s,o){const{handler:y,disabled:p}=s;p||(n.value=!1,o==null||o.stopPropagation(),o==null||o.preventDefault(),y==null||y())}function l(s){return s.map(o=>{const{disabled:y,label:p,children:i,divider:f=!1}=o,h={item:o,handler:a,showIcon:e.showIcon};return!i||i.length===0?g(_e,null,[g(ne.Item,{disabled:y,class:`${Be}__item`,key:p},{default:()=>[g(Tt,h,null)]}),f?g(Yn,{key:`d-${p}`},null):null]):_(n)?g(ne.SubMenu,{key:p,disabled:y,popupClassName:`${Be}__popup`},{title:()=>g(Tt,h,null),default:()=>l(i)}):null})}return()=>{let s;if(!_(n))return null;const{items:o}=e;return g(ne,{inlineIndent:12,mode:"vertical",class:Be,ref:t,style:_(r)},$r(s=l(o))?s:{default:()=>[s]})}}});const W={domList:[],resolve:()=>{}},Br=function(e){const{event:t}=e||{};if(t&&(t==null||t.preventDefault()),!!xn)return new Promise(n=>{const r=document.body,a=document.createElement("div"),l={};e.styles&&(l.styles=e.styles),e.items&&(l.items=e.items),e.event&&(l.customEvent=t,l.axis={x:t.clientX,y:t.clientY});const s=g(Pr,l);_n(s,a);const o=function(){W.resolve("")};W.domList.push(a);const y=function(){W.domList.forEach(p=>{try{p&&r.removeChild(p)}catch(i){}}),r.removeEventListener("click",o),r.removeEventListener("scroll",o)};W.resolve=function(p){y(),n(p)},y(),r.appendChild(a),r.addEventListener("click",o),r.addEventListener("scroll",o)})},Et=function(){W&&(W.resolve(""),W.domList=[])};function Ht(e=!0){return Sn()&&e&&Ue(()=>{Et()}),[Br,Et]}const Lr={value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:C.string,toolbar:C.bool,search:C.bool,searchValue:C.string,checkStrictly:C.bool,clickRowToExpand:C.bool.def(!0),checkable:C.bool.def(!1),defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:C.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array},filterFn:{type:Function,default:null},highlight:{type:[Boolean,String],default:!1},expandOnSearch:C.bool.def(!1),checkOnSearch:C.bool.def(!1),selectedOnSearch:C.bool.def(!1)};function Ir(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Mt(e)}var Nr=le({name:"BasicTree",inheritAttrs:!1,props:Lr,emits:["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue"],setup(e,{attrs:t,slots:n,emit:r,expose:a}){const l=je({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),s=je({startSearch:!1,searchText:"",searchData:[]}),o=B([]),[y]=Ht(),{prefixCls:p}=Tn("basic-tree"),i=R(()=>{const{replaceFields:m}=e;return I({children:"children",title:"title",key:"key"},m)}),f=R(()=>{let m=ce(I(I({blockNode:!0},t),e),{expandedKeys:l.expandedKeys,selectedKeys:l.selectedKeys,checkedKeys:l.checkedKeys,checkStrictly:l.checkStrictly,replaceFields:_(i),"onUpdate:expandedKeys":E=>{l.expandedKeys=E,r("update:expandedKeys",E)},"onUpdate:selectedKeys":E=>{l.selectedKeys=E,r("update:selectedKeys",E)},onCheck:(E,K)=>{let w=ue(l.checkedKeys);if(En(w)&&s.startSearch){const{key:c}=_(i);w=Er(w,H(K.node.$attrs.node[c])),K.checked&&w.push(K.node.$attrs.node[c]),l.checkedKeys=w}else l.checkedKeys=E;const T=ue(l.checkedKeys);r("update:value",T),r("check",T,K)},onRightClick:Ke});return ct(m,"treeData","class")}),h=R(()=>s.startSearch?s.searchData:_(o)),u=R(()=>!h.value||h.value.length===0),{deleteNodeByKey:b,insertNodeByKey:v,insertNodesByKey:k,filterByLevel:O,updateNodeByKey:F,getAllKeys:ie,getChildrenKeys:H,getEnabledKeys:Ee}=Dr(o,i);function Oe(m,E){return!E&&e.renderIcon&&$e(e.renderIcon)?e.renderIcon(m):E}function Ke(K){return Q(this,arguments,function*({event:m,node:E}){var x;const{rightMenuList:w=[],beforeRightClick:T}=e;let c={event:m,items:[]};if(T&&$e(T)){let S=yield T(E,m);Array.isArray(S)?c.items=S:Object.assign(c,S)}else c.items=w;!((x=c.items)!=null&&x.length)||y(c)})}function V(m){l.expandedKeys=m}function we(){return l.expandedKeys}function Ae(m){l.selectedKeys=m}function Fe(){return l.selectedKeys}function pe(m){l.checkedKeys=m}function G(){return l.checkedKeys}function ye(m){l.checkedKeys=m?Ee():[]}function Y(m){l.expandedKeys=m?ie():[]}function Ce(m){l.checkStrictly=m}te(()=>e.searchValue,m=>{m!==s.searchText&&(s.searchText=m)},{immediate:!0}),te(()=>e.treeData,m=>{m&&Z(s.searchText)});function Z(m){if(m!==s.searchText&&(s.searchText=m),r("update:searchValue",m),!m){s.startSearch=!1;return}const{filterFn:E,checkable:K,expandOnSearch:w,checkOnSearch:T,selectedOnSearch:c}=_(e);s.startSearch=!0;const{title:x,key:S}=_(i),$=[];if(s.searchData=On(_(o),D=>{var U,J;const X=E?E(m,D,_(i)):(J=(U=D[x])==null?void 0:U.includes(m))!=null?J:!1;return X&&$.push(D[S]),X},_(i)),w){const D=Kn(s.searchData).map(X=>X[S]);D&&D.length&&V(D)}T&&K&&$.length&&pe($),c&&$.length&&Ae($)}function me(m,E){if(!(!e.clickRowToExpand||!E||E.length===0))if(!l.expandedKeys.includes(m))V([...l.expandedKeys,m]);else{const K=[...l.expandedKeys],w=K.findIndex(T=>T===m);w!==-1&&K.splice(w,1),V(K)}}de(()=>{o.value=e.treeData}),Ve(()=>{const m=parseInt(e.defaultExpandLevel);m>0?l.expandedKeys=O(m):e.defaultExpandAll&&Y(!0)}),de(()=>{l.expandedKeys=e.expandedKeys}),de(()=>{l.selectedKeys=e.selectedKeys}),de(()=>{l.checkedKeys=e.checkedKeys}),te(()=>e.value,()=>{l.checkedKeys=ue(e.value||[])}),te(()=>l.checkedKeys,()=>{const m=ue(l.checkedKeys);r("update:value",m),r("change",m)}),de(()=>{l.checkStrictly=e.checkStrictly}),a({setExpandedKeys:V,getExpandedKeys:we,setSelectedKeys:Ae,getSelectedKeys:Fe,setCheckedKeys:pe,getCheckedKeys:G,insertNodeByKey:v,insertNodesByKey:k,deleteNodeByKey:b,updateNodeByKey:F,checkAll:ye,expandAll:Y,filterByLevel:m=>{l.expandedKeys=O(m)},setSearchValue:m=>{Z(m)},getSearchValue:()=>s.searchText});function ve(m){const{actionList:E}=e;if(!(!E||E.length===0))return E.map((K,w)=>{var c;let T=!0;return $e(K.show)?T=(c=K.show)==null?void 0:c.call(K,m):ht(K.show)&&(T=K.show),T?g("span",{key:w,class:`${p}__action`},[K.render(m)]):null})}function se({data:m,level:E}){if(!m)return null;const K=s.searchText,{highlight:w}=_(e);return m.map(T=>{var Je;const{title:c,key:x,children:S}=_(i),$=ct(T,"title"),D=Oe(ce(I({},T),{level:E}),T.icon),X=Pe(T,S)||[],U=Pe(T,c),J=K?U.indexOf(K):-1,Vt=s.startSearch&&!An(K)&&w&&J!==-1,Ut=`color: ${ht(w)?"#f50":w}`,qt=Vt?g("span",{class:(Je=_(f))!=null&&Je.blockNode?`${p}__content`:""},[g("span",null,[U.substr(0,J)]),g("span",{style:Ut},[K]),g("span",null,[U.substr(J+K.length)])]):U;return g(L.TreeNode,he($,{node:ue(T),key:Pe(T,x)}),{title:()=>{var Qe,et;return g("span",{class:`${p}-title pl-2`,onClick:me.bind(null,T[x],T[S])},[(Qe=T.slots)!=null&&Qe.title?Fn(n,(et=T.slots)==null?void 0:et.title,T):g(_e,null,[D&&g(Or,{icon:D},null),qt,g("span",{class:`${p}__actions`},[ve(ce(I({},T),{level:E}))])])])},default:()=>se({data:X,level:E+1})})})}return()=>{let m;const{title:E,helpMessage:K,toolbar:w,search:T,checkable:c}=e,x=E||w||T||n.headerTitle,S={height:"calc(100% - 38px)"};return g("div",{class:[p,"h-full",t.class]},[x&&g(Cr,{checkable:c,checkAll:ye,expandAll:Y,title:E,search:T,toolbar:w,helpMessage:K,onStrictlyChange:Ce,onSearch:Z,searchText:s.searchText},Ir(m=ot(n))?m:{default:()=>[m]}),ut(g(wn,{style:S},{default:()=>[g(L,he(_(f),{showIcon:!1}),I({default:()=>se({data:_(h),level:1})},ot(n)))]}),[[dt,!_(u)]]),ut(g(ft,{image:ft.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[dt,_(u)]])])}}});const jr=le({name:"AgentFile",components:{BasicTree:Nr,BasicTable:Rn,PageWrapper:In,PopConfirmButton:Cn,TableAction:zn,Icon:ae,Upload:Wn,BasicModal:Xn,BasicUpload:Gn},props:[],emits:[],setup(e,t){const n=je({agent:{},current_dir:"./",entrys:[],uploadlist:[]}),r=B(null),a=B(null),l=B(""),s=B(null),o=B(null),y=B(""),{currentRoute:p}=Dn(),i=R(()=>_(p).params),{closeCurrent:f,setTitle:h}=$n(),{createMessage:u}=Ln(),{apiUrl:b="/manjusaka"}=Mn(),[v,k]=Ht({authRemove:!0}),O=B({title:"\u786E\u8BA4\u5220\u9664",visible:!1,okText:"\u786E\u5B9A\u5220\u9664",okType:"danger",cancelText:"\u53D6\u6D88"}),F=B({title:"\u91CD\u547D\u540D",visible:!1}),[ie,{openModal:H,closeModal:Ee}]=pt(),[Oe,{openModal:Ke,closeModal:V}]=pt(),[we,{reload:Ae}]=Hn({pagination:!1,showTableSetting:!1,tableSetting:{redo:!0,size:!1,setting:!1},showIndexColumn:!1,size:"small",bordered:!0,columns:[{dataIndex:"file_type",align:"right",sorter:!0,width:40,customRender:({record:c})=>{let x="";switch(c.file_type){case"File":x="ion:document";break;case"Dir":x="bi:folder";break;case"Symlink":x="mdi:link-variant";break;default:x="mdi:file-question-outline"}return Dt(ae,{size:20,icon:x})}},{title:"\u540D\u79F0",sorter:!0,align:"left",dataIndex:"file_name"},{title:"\u5927\u5C0F",dataIndex:"size",sorter:!0,width:100,customRender:({record:c})=>Fe(c.size)},{title:"\u6743\u9650",dataIndex:"permissions",width:100},{title:"\u7528\u6237\u7EC4",dataIndex:"user",width:150,customRender:({record:c})=>`u-${c.user},g-${c.group}`},{title:"\u4FEE\u6539\u65F6\u95F4",sorter:!0,width:150,dataIndex:"modified"}],clickToRowSelect:!0,bordered:!0,striped:!0});function Fe(c){const x=["Bytes","KB","MB","GB","TB"];if(c===0)return"-";const S=Math.floor(Math.log(c)/Math.log(1024)),$=(c/rt(1024,S)).toFixed(0);return S===0?"1 KB":`${$} ${x[S]}`}function pe(c){c.action=b+"/sftp/upload/"+n.agent.id,c.filename=n.current_dir+"/"+c.file.name,Bn(c).then(x=>{G()}).catch(x=>{})}function G(){n.current_dir,q({action:"sftp/read_dir/"+n.agent.id,data:{id:"",path:n.current_dir}}).then(c=>{n.current_dir=c.current_dir.replaceAll("\\","/").split("/").slice(1).join("/"),n.entrys=c.entrys}).catch(c=>{})}function ye(){let c=n.current_dir.split("/").slice(0,-1).join("/"),x=c===""?"/":c;q({action:"sftp/read_dir/"+n.agent.id,data:{id:"",path:x}}).then(S=>{n.current_dir=S.current_dir.replaceAll("\\","/").split("/").slice(1).join("/"),n.entrys=S.entrys}).catch(S=>{})}function Y(c){if(c.file_type!=="File"){let x=n.current_dir===""?c.file_name:n.current_dir+"/"+c.file_name;q({action:"sftp/read_dir/"+n.agent.id,data:{id:"",path:x}}).then(S=>{n.current_dir=S.current_dir.replaceAll("\\","/").split("/").slice(1).join("/"),n.entrys=S.entrys}).catch(S=>{})}}function Ce(){q({action:"sftp/read_dir/"+n.agent.id,data:{id:"",path:"/"}}).then(c=>{n.current_dir=c.current_dir,n.entrys=c.entrys}).catch(c=>{})}function Z(c,x){return Q(this,null,function*(){const S=`${n.current_dir}/${c.file_name}`,$=`${n.current_dir}/${x}`;try{yield q({action:`sftp/rename/${n.agent.id}`,data:{id:S,path:$}}),u.success(`\u91CD\u547D\u540D\u6210\u529F\uFF1A${x}`),G()}catch(D){throw u.error(`\u91CD\u547D\u540D\u5931\u8D25\uFF1A${D.message||D}`),D}})}function me(c){s.value=c,l.value=c.file_name,Ke(!0),He(()=>{a.value&&a.value.focus()})}function Xe(){return Q(this,null,function*(){if(!l.value.trim()){u.warning("\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}if(l.value===s.value.file_name){V();return}try{yield Z(s.value,l.value),V()}catch(c){}})}function ve(c){return Q(this,null,function*(){const x=`${n.current_dir}/${c.file_name}`;try{yield q({action:`sftp/remove/${n.agent.id}`,data:{id:c.file_type,path:x}}),u.success(`\u5220\u9664\u6210\u529F\uFF1A${c.file_name}`),G()}catch(S){u.error(`\u5220\u9664\u5931\u8D25\uFF1A${S.message||S}`)}})}function se(c){o.value=c,y.value=`${n.current_dir}/${c.file_name}`,H(!0)}function m(){return Q(this,null,function*(){o.value&&(yield ve(o.value),Ee())})}function E(c,x){x.preventDefault(),v({event:x,items:[...c.file_type!=="File"?[{label:"\u8FDB\u5165",icon:"ant-design:enter-outlined",handler:()=>Y(c)}]:[],{label:"\u91CD\u547D\u540D",icon:"ant-design:edit-outlined",handler:()=>me(c)},{label:"\u5220\u9664",icon:"ant-design:delete-outlined",danger:!0,handler:()=>se(c)},{label:"\u4E0B\u8F7D",icon:"ant-design:download-outlined",disabled:c.file_type==="Dir"||c.file_type==="Symlink",handler:()=>w(c)}]})}function K(){setTimeout(()=>{const c=document.querySelector(".ant-table-wrapper");c&&c.addEventListener("contextmenu",x=>{let S=x.target;for(;S&&!S.classList.contains("ant-table-row");)S=S.parentElement;if(S){const $=Array.from(S.parentElement.children).indexOf(S);if($>=0&&n.entrys[$]){const D=n.entrys[$];x.preventDefault(),E(D,x)}}else x.preventDefault()},!0)},100)}function w(c){let x=n.current_dir+"/"+c.file_name;Zn({url:b+"/sftp/download?id="+n.agent.id+"&path="+x,fileName:c.file_name})}function T(){q({action:"agentinfo",data:{id:_(i).id}}).then(c=>{n.agent=c,n.current_dir=n.agent.process.replaceAll("\\","/").split("/").slice(0,-1).join("/"),h("\u6587\u4EF6 - "+n.agent.username+"@"+n.agent.intranet)}).catch(()=>{})}return Ve(()=>{T(),K()}),Ue(()=>{const c=document.querySelector(".ant-table-tbody");c&&c.removeEventListener("contextmenu",()=>{})}),{registerTable:we,registerDeleteModal:ie,registerRenameModal:Oe,state:n,FileUpload:pe,FileDownload:w,FileReadDir:G,FileReadDir2:ye,FileReadDir3:Y,GetDriveList:Ce,renameFile:Z,deleteFile:ve,tableRef:r,deleteModalConfig:O,renameModalConfig:F,deleteFileName:y,renameValue:l,renameInputRef:a,confirmDelete:se,handleDeleteConfirm:m,showRenameModal:me,handleRenameConfirm:Xe,ContextMenu:E}}}),Rr={style:{color:"red"}};function Hr(e,t,n,r,a,l){const s=P("a-button"),o=P("Upload"),y=P("a-input"),p=P("TableAction"),i=P("BasicTable"),f=P("BasicModal"),h=P("PageWrapper");return N(),ke(h,{dense:"",contentFullHeight:"",contentBackground:"",fixedHeight:""},{default:M(()=>[g(i,{ref:"tableRef",onRegister:e.registerTable,onRowDbClick:e.FileReadDir3,dataSource:e.state.entrys},{toolbar:M(()=>[g(o,{"show-upload-list":!1,"custom-request":e.FileUpload},{default:M(()=>[g(s,{type:"primary"},{default:M(()=>[...t[2]||(t[2]=[z("\u4E0A\u4F20\u6587\u4EF6",-1)])]),_:1})]),_:1},8,["custom-request"]),g(s,{type:"dashed",onClick:e.FileReadDir2},{default:M(()=>[...t[3]||(t[3]=[z("\u4E0A\u7EA7",-1)])]),_:1},8,["onClick"]),g(y,{value:e.state.current_dir,"onUpdate:value":t[0]||(t[0]=u=>e.state.current_dir=u)},null,8,["value"]),g(s,{type:"dashed",onClick:e.FileReadDir},{default:M(()=>[...t[4]||(t[4]=[z("\u52A0\u8F7D",-1)])]),_:1},8,["onClick"])]),action:M(({record:u})=>[g(p,{actions:[{label:"\u4E0B\u8F7D",auth:u.file_type!=="File",onClick:e.FileDownload.bind(null,u)}]},null,8,["actions"])]),_:1},8,["onRegister","onRowDbClick","dataSource"]),g(f,he(e.deleteModalConfig,{onRegister:e.registerDeleteModal,onOk:e.handleDeleteConfirm}),{default:M(()=>[Me("p",null,[t[5]||(t[5]=z('\u786E\u5B9A\u5220\u9664 "',-1)),Me("span",Rr,Ne(e.deleteFileName),1),t[6]||(t[6]=z('" \u5417\uFF1F',-1))]),t[7]||(t[7]=Me("p",{style:{color:"#ff4d4f","font-size":"12px"}},"\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500",-1))]),_:1},16,["onRegister","onOk"]),g(f,he(e.renameModalConfig,{onRegister:e.registerRenameModal,onOk:e.handleRenameConfirm}),{default:M(()=>[g(y,{value:e.renameValue,"onUpdate:value":t[1]||(t[1]=u=>e.renameValue=u),placeholder:"\u65B0\u6587\u4EF6\u540D",onKeydown:Pn(e.handleRenameConfirm,["enter"]),ref:"renameInputRef"},null,8,["value","onKeydown"])]),_:1},16,["onRegister","onOk"])]),_:1})}var ha=$t(jr,[["render",Hr]]);export{ha as default};
