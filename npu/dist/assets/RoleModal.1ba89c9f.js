var M=Object.defineProperty;var p=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var m=(o,a,e)=>a in o?M(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,f=(o,a)=>{for(var e in a||(a={}))S.call(a,e)&&m(o,e,a[e]);if(p)for(var e of p(a))v.call(a,e)&&m(o,e,a[e]);return o};var d=(o,a,e)=>new Promise((i,u)=>{var c=s=>{try{t(e.next(s))}catch(r){u(r)}},n=s=>{try{t(e.throw(s))}catch(r){u(r)}},t=s=>s.done?i(s.value):Promise.resolve(s.value).then(c,n);t((e=e.apply(o,a)).next())});import{B as _,u as A}from"./useForm.77c27927.js";import{B as C,u as E}from"./index.e472a703.js";import{b as k,r as w,aQ as P,cj as R,aR as F,o as I,i as q,j as y,k as V,aT as $,q as D,ea as x}from"./index.ecaec58b.js";const G=k({name:"ProxyModal",components:{BasicModal:C,BasicForm:_},emits:["success","register"],setup(o,{emit:a}){const e=w("Socks5"),i=[{field:"id",label:"NPCID",component:"ApiSelect",required:!0,componentProps:{api:x,params:{action:"agentget"},labelField:"id",valueField:"id",resultField:"items"}},{field:"name",label:"\u96A7\u9053\u7C7B\u578B",required:!0,component:"RadioButtonGroup",componentProps:{options:[{label:"SOCKS5",value:"Socks5"},{label:"\u7AEF\u53E3\u6620\u5C04",value:"Mapping"}],onChange:l=>{e.value=l}}},{field:"local_port",label:"\u672C\u5730\u7AEF\u53E3",required:!0,component:"InputNumber"},{field:"remote_addr",label:"\u8FDC\u7A0B\u5730\u5740",required:!0,component:"Input",componentProps:{placeholder:"127.0.0.1:3389"},ifShow:()=>e.value==="Mapping"},{field:"username",label:"\u7528\u6237",component:"Input",defaultValue:"buut",ifShow:()=>e.value==="Socks5"},{field:"password",label:"\u5BC6\u7801",component:"Input",defaultValue:"buut",ifShow:()=>e.value==="Socks5"}],[u,{resetFields:c,setFieldsValue:n,getFieldsValue:t,validate:s}]=A({labelWidth:90,schemas:i,showActionButtonGroup:!1}),[r,{setModalProps:g,closeModal:B}]=E(l=>d(this,null,function*(){c(),g({confirmLoading:!1}),n(f({},l.record)),e.value}));function h(){return d(this,null,function*(){const l=yield s(),{createMessage:b}=D();R({action:"proxyadd",data:l}).then(()=>{b.success("\u6210\u529F! \u8BF7\u8FD4\u56DE\u96A7\u9053\u4EE3\u7406\u5217\u8868\u67E5\u770B\u3002"),a("success"),B()}).catch(O=>{}).finally(()=>{})})}return{registerModal:r,registerForm:u,handleSubmit:h}}});function N(o,a,e,i,u,c){const n=F("BasicForm"),t=F("BasicModal");return I(),q(t,$(o.$attrs,{onRegister:o.registerModal,showFooter:"",title:"\u65B0\u5EFA\u96A7\u9053\u4EE3\u7406",width:"600px",onOk:o.handleSubmit}),{default:y(()=>[V(n,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","onOk"])}var T=P(G,[["render",N]]);export{T as R};
