import{B as C,u as b}from"./useTable.8f642a92.js";import{T as g,B as A}from"./useForm.a5b01752.js";import{D as B}from"./index.0f786aec.js";import{aQ as F,b as _,f as h,e as x,aR as n,o as T,z as D,k as r,j as l,m as R,cj as f,q as M}from"./index.59109d81.js";import{a as E}from"./index.abeaa45a.js";import{R as I}from"./RoleModal.6d237f64.js";import"./index.7d1af758.js";import"./index.169a2f8c.js";import"./index.6af6e8ee.js";import"./useSize.f495344d.js";import"./useContentViewHeight.b742a811.js";import"./ArrowLeftOutlined.76351c5d.js";import"./index.5d8d8edd.js";import"./FullscreenOutlined.e9ba2b3a.js";import"./_baseIteratee.2ac5361a.js";import"./index.b51e258d.js";import"./index.3b17542c.js";import"./isEqual.442fc559.js";import"./index.ef80d76f.js";import"./useSortable.98c26055.js";import"./index.24c08581.js";import"./index.9a88e72b.js";import"./scrollTo.66a1ba12.js";import"./index.f2a8f060.js";import"./download.60714c4e.js";const w=_({name:"ListenManagement",components:{BasicTable:C,RoleModal:I,TableAction:g,Description:B,BasicForm:A},setup(){const e=h({proxys:[]}),{createMessage:o}=M();x();const[c,{openModal:d}]=E(),[m,{reload:a}]=b({title:"\u9700\u8981\u5148\u52A0\u8F7DNPC2\u624D\u80FD\u4F7F\u7528\u96A7\u9053\u4EE3\u7406",columns:[{title:"ID",dataIndex:"id",width:300},{title:"NPC",dataIndex:"agent"},{title:"\u96A7\u9053\u7C7B\u578B",dataIndex:"name"},{title:"\u672C\u5730\u7AEF\u53E3",dataIndex:"local_port"},{title:"\u8FDC\u7A0B\u5730\u5740",dataIndex:"remote_addr"},{title:"\u4EE3\u7406\u9A8C\u8BC1",dataIndex:"username",customRender:({record:t})=>t.username+"/"+t.password}],api:f,showTableSetting:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:100,title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"},fixed:void 0},beforeFetch:function(t){return{action:"proxylist",data:{}}}});function s(){d(!0,{}),a()}function i(t){f({action:"proxystop",data:{id:t.id}}).then(p=>{o.success("\u5220\u9664\u6210\u529F"),a()}).catch(()=>{o.error("\u5220\u9664\u5931\u8D25")})}function u(){a()}return{state:e,registerTablelisten:m,registerModal:c,handleCreate:s,handleDelete:i,handleSuccess:u}}});function S(e,o,c,d,m,a){const s=n("a-button"),i=n("TableAction"),u=n("BasicTable"),t=n("RoleModal");return T(),D("div",null,[r(u,{onRegister:e.registerTablelisten},{toolbar:l(()=>[r(s,{type:"primary",onClick:e.handleCreate},{default:l(()=>[...o[0]||(o[0]=[R(" \u65B0\u5EFA\u96A7\u9053 ",-1)])]),_:1},8,["onClick"])]),action:l(({record:p})=>[r(i,{actions:[{icon:"ant-design:delete-outlined",label:"\u5173\u505C",color:"error",popConfirm:{title:"\u786E\u8BA4\u5220\u9664\u96A7\u9053\uFF1F",confirm:e.handleDelete.bind(null,p)}}]},null,8,["actions"])]),_:1},8,["onRegister"]),r(t,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}var ae=F(w,[["render",S]]);export{ae as default};
