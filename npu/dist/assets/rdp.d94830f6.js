var v=(n,e,t)=>new Promise((_,s)=>{var o=c=>{try{a(t.next(c))}catch(T){s(T)}},i=c=>{try{a(t.throw(c))}catch(T){s(T)}},a=c=>c.done?_(c.value):Promise.resolve(c.value).then(o,i);a((t=t.apply(n,e)).next())});import{a as pe}from"./index.242d16c8.js";import{aQ as ye,b as me,b0 as he,c as ve,bR as Fe,r as A,am as Ce,ag as Re,$ as ke,aR as ee,o as Ee,i as ze,j as te,l as ne,k as xe,m as Se,t as Te,cj as Ae,s as Le}from"./index.0bfc751b.js";import"./index.701d5ab5.js";import"./index.71b679cd.js";import"./useSize.df470e37.js";import"./useContentViewHeight.cc5ed19b.js";import"./ArrowLeftOutlined.b5c738ec.js";let r;function k(n){const e=r.__externref_table_alloc();return r.__wbindgen_externrefs.set(e,n),e}function _e(n){if(typeof n=="number"&&(n>=1114112||n>=55296&&n<57344))throw new Error(`expected a valid Unicode scalar value, found ${n}`)}function E(n,e){if(!(n instanceof e))throw new Error(`expected instance of ${e.name}`)}const re=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>n.dtor(n.a,n.b));function K(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const s=n.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=n.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(n)){const s=n.length;let o="[";s>0&&(o+=K(n[0]));for(let i=1;i<s;i++)o+=", "+K(n[i]);return o+="]",o}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let _;if(t&&t.length>1)_=t[1];else return toString.call(n);if(_=="Object")try{return"Object("+JSON.stringify(n)+")"}catch(s){return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:_}function Ie(n,e){n=n>>>0;const t=d(),_=[];for(let s=n;s<n+4*e;s+=4)_.push(r.__wbindgen_externrefs.get(t.getUint32(s,!0)));return r.__externref_drop_slice(n,e),_}function L(n,e){return n=n>>>0,z().subarray(n/1,n/1+e)}function Oe(n,e){return n=n>>>0,Me().subarray(n/1,n/1+e)}let F=null;function d(){return(F===null||F.buffer.detached===!0||F.buffer.detached===void 0&&F.buffer!==r.memory.buffer)&&(F=new DataView(r.memory.buffer)),F}function f(n,e){return n=n>>>0,Ue(n,e)}let I=null;function z(){return(I===null||I.byteLength===0)&&(I=new Uint8Array(r.memory.buffer)),I}let O=null;function Me(){return(O===null||O.byteLength===0)&&(O=new Uint8ClampedArray(r.memory.buffer)),O}function u(n,e){try{return n.apply(this,e)}catch(t){const _=k(t);r.__wbindgen_exn_store(_)}}function y(n){return n==null}function C(n,e,t,_){const s={a:n,b:e,cnt:1,dtor:t},o=(...i)=>{s.cnt++;const a=s.a;s.a=0;try{return _(a,s.b,...i)}finally{s.a=a,o._wbg_cb_unref()}};return o._wbg_cb_unref=()=>{--s.cnt===0&&(s.dtor(s.a,s.b),s.a=0,re.unregister(s))},re.register(o,s,s),o}function Pe(n,e){const t=e(n.length*1,1)>>>0;return z().set(n,t/1),g=n.length,t}function l(n,e,t){if(t===void 0){const a=M.encode(n),c=e(a.length,1)>>>0;return z().subarray(c,c+a.length).set(a),g=a.length,c}let _=n.length,s=e(_,1)>>>0;const o=z();let i=0;for(;i<_;i++){const a=n.charCodeAt(i);if(a>127)break;o[s+i]=a}if(i!==_){i!==0&&(n=n.slice(i)),s=t(s,_,_=i+n.length*3,1)>>>0;const a=z().subarray(s+i,s+_);i+=M.encodeInto(n,a).written,s=t(s,_,i,1)>>>0}return g=i,s}function R(n){const e=r.__wbindgen_externrefs.get(n);return r.__externref_table_dealloc(n),e}let V=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});V.decode();const je=2146435072;let B=0;function Ue(n,e){return B+=e,B>=je&&(V=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),V.decode(),B=e),V.decode(z().subarray(n,n+e))}const M=new TextEncoder;"encodeInto"in M||(M.encodeInto=function(n,e){const t=M.encode(n);return e.set(t),{read:n.length,written:t.length}});let g=0;function We(n,e){r.wasm_bindgen_c8569f1c332166b___convert__closures_____invoke_______1_(n,e)}function N(n,e,t){r.wasm_bindgen_c8569f1c332166b___convert__closures_____invoke___web_sys_80a2c3d9e8017199___features__gen_CloseEvent__CloseEvent_____(n,e,t)}function De(n,e,t){r.wasm_bindgen_c8569f1c332166b___convert__closures_____invoke___wasm_bindgen_c8569f1c332166b___JsValue_____(n,e,t)}function Ve(n,e){r.wasm_bindgen_c8569f1c332166b___convert__closures_____invoke______(n,e)}function $e(n,e,t,_){r.wasm_bindgen_c8569f1c332166b___convert__closures_____invoke___wasm_bindgen_c8569f1c332166b___JsValue__wasm_bindgen_c8569f1c332166b___JsValue_____(n,e,t,_)}const qe=["blob","arraybuffer"],J=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_clipboarddata_free(n>>>0,1)),se=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_clipboarditem_free(n>>>0,1)),G=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_desktopsize_free(n>>>0,1)),oe=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_deviceevent_free(n>>>0,1)),ie=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_extension_free(n>>>0,1)),ce=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_inputtransaction_free(n>>>0,1)),ae=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_ironerror_free(n>>>0,1));typeof FinalizationRegistry=="undefined"||new FinalizationRegistry(n=>r.__wbg_rdpfile_free(n>>>0,1));const ue=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_session_free(n>>>0,1)),H=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_sessionbuilder_free(n>>>0,1)),be=typeof FinalizationRegistry=="undefined"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_sessionterminationinfo_free(n>>>0,1));class x{static __wrap(e){e=e>>>0;const t=Object.create(x.prototype);return t.__wbg_ptr=e,J.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,J.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_clipboarddata_free(e,0)}addBinary(e,t){const _=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),s=g,o=Pe(t,r.__wbindgen_malloc),i=g;r.clipboarddata_addBinary(this.__wbg_ptr,_,s,o,i)}items(){const e=r.clipboarddata_items(this.__wbg_ptr);var t=Ie(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*4,4),t}constructor(){const e=r.clipboarddata_create();return this.__wbg_ptr=e>>>0,J.register(this,this.__wbg_ptr,this),this}addText(e,t){const _=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),s=g,o=l(t,r.__wbindgen_malloc,r.__wbindgen_realloc),i=g;r.clipboarddata_addText(this.__wbg_ptr,_,s,o,i)}isEmpty(){return r.clipboarddata_isEmpty(this.__wbg_ptr)!==0}}Symbol.dispose&&(x.prototype[Symbol.dispose]=x.prototype.free);class P{static __wrap(e){e=e>>>0;const t=Object.create(P.prototype);return t.__wbg_ptr=e,se.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,se.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_clipboarditem_free(e,0)}value(){return r.clipboarditem_value(this.__wbg_ptr)}mimeType(){let e,t;try{const _=r.clipboarditem_mimeType(this.__wbg_ptr);return e=_[0],t=_[1],f(_[0],_[1])}finally{r.__wbindgen_free(e,t,1)}}}Symbol.dispose&&(P.prototype[Symbol.dispose]=P.prototype.free);class S{static __wrap(e){e=e>>>0;const t=Object.create(S.prototype);return t.__wbg_ptr=e,G.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,G.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_desktopsize_free(e,0)}get width(){return r.__wbg_get_desktopsize_width(this.__wbg_ptr)}set width(e){r.__wbg_set_desktopsize_width(this.__wbg_ptr,e)}get height(){return r.__wbg_get_desktopsize_height(this.__wbg_ptr)}set height(e){r.__wbg_set_desktopsize_height(this.__wbg_ptr,e)}constructor(e,t){const _=r.desktopsize_create(e,t);return this.__wbg_ptr=_>>>0,G.register(this,this.__wbg_ptr,this),this}}Symbol.dispose&&(S.prototype[Symbol.dispose]=S.prototype.free);class p{static __wrap(e){e=e>>>0;const t=Object.create(p.prototype);return t.__wbg_ptr=e,oe.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,oe.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_deviceevent_free(e,0)}static mouseMove(e,t){const _=r.deviceevent_mouseMove(e,t);return p.__wrap(_)}static keyPressed(e){const t=r.deviceevent_keyPressed(e);return p.__wrap(t)}static keyReleased(e){const t=r.deviceevent_keyReleased(e);return p.__wrap(t)}static unicodePressed(e){const t=e.codePointAt(0);_e(t);const _=r.deviceevent_unicodePressed(t);return p.__wrap(_)}static wheelRotations(e,t,_){const s=r.deviceevent_wheelRotations(e,t,_);return p.__wrap(s)}static unicodeReleased(e){const t=e.codePointAt(0);_e(t);const _=r.deviceevent_unicodeReleased(t);return p.__wrap(_)}static mouseButtonPressed(e){const t=r.deviceevent_mouseButtonPressed(e);return p.__wrap(t)}static mouseButtonReleased(e){const t=r.deviceevent_mouseButtonReleased(e);return p.__wrap(t)}}Symbol.dispose&&(p.prototype[Symbol.dispose]=p.prototype.free);class ${__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ie.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_extension_free(e,0)}constructor(e,t){const _=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),s=g,o=r.extension_create(_,s,t);return this.__wbg_ptr=o>>>0,ie.register(this,this.__wbg_ptr,this),this}}Symbol.dispose&&($.prototype[Symbol.dispose]=$.prototype.free);class X{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ce.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_inputtransaction_free(e,0)}constructor(){const e=r.inputtransaction_create();return this.__wbg_ptr=e>>>0,ce.register(this,this.__wbg_ptr,this),this}addEvent(e){E(e,p);var t=e.__destroy_into_raw();r.inputtransaction_addEvent(this.__wbg_ptr,t)}}Symbol.dispose&&(X.prototype[Symbol.dispose]=X.prototype.free);class j{static __wrap(e){e=e>>>0;const t=Object.create(j.prototype);return t.__wbg_ptr=e,ae.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ae.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_ironerror_free(e,0)}kind(){return r.ironerror_kind(this.__wbg_ptr)}backtrace(){let e,t;try{const _=r.ironerror_backtrace(this.__wbg_ptr);return e=_[0],t=_[1],f(_[0],_[1])}finally{r.__wbindgen_free(e,t,1)}}}Symbol.dispose&&(j.prototype[Symbol.dispose]=j.prototype.free);Object.freeze({General:0,0:"General",WrongPassword:1,1:"WrongPassword",LogonFailure:2,2:"LogonFailure",AccessDenied:3,3:"AccessDenied",RDCleanPath:4,4:"RDCleanPath",ProxyConnect:5,5:"ProxyConnect",NegotiationFailure:6,6:"NegotiationFailure"});Object.freeze({Pixel:0,0:"Pixel",Line:1,1:"Line",Page:2,2:"Page"});class U{static __wrap(e){e=e>>>0;const t=Object.create(U.prototype);return t.__wbg_ptr=e,ue.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ue.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_session_free(e,0)}onClipboardPaste(e){return E(e,x),r.session_onClipboardPaste(this.__wbg_ptr,e.__wbg_ptr)}run(){return r.session_run(this.__wbg_ptr)}applyInputs(e){E(e,X);var t=e.__destroy_into_raw();const _=r.session_applyInputs(this.__wbg_ptr,t);if(_[1])throw R(_[0])}desktopSize(){const e=r.session_desktopSize(this.__wbg_ptr);return S.__wrap(e)}invokeExtension(e){E(e,$);var t=e.__destroy_into_raw();const _=r.session_invokeExtension(this.__wbg_ptr,t);if(_[2])throw R(_[1]);return R(_[0])}releaseAllInputs(){const e=r.session_releaseAllInputs(this.__wbg_ptr);if(e[1])throw R(e[0])}synchronizeLockKeys(e,t,_,s){const o=r.session_synchronizeLockKeys(this.__wbg_ptr,e,t,_,s);if(o[1])throw R(o[0])}supportsUnicodeKeyboardShortcuts(){return r.session_supportsUnicodeKeyboardShortcuts(this.__wbg_ptr)!==0}resize(e,t,_,s,o){r.session_resize(this.__wbg_ptr,e,t,y(_)?4294967297:_>>>0,y(s)?4294967297:s>>>0,y(o)?4294967297:o>>>0)}shutdown(){const e=r.session_shutdown(this.__wbg_ptr);if(e[1])throw R(e[0])}}Symbol.dispose&&(U.prototype[Symbol.dispose]=U.prototype.free);class w{static __wrap(e){e=e>>>0;const t=Object.create(w.prototype);return t.__wbg_ptr=e,H.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,H.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_sessionbuilder_free(e,0)}connect(){return r.sessionbuilder_connect(this.__wbg_ptr)}authToken(e){const t=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),_=g,s=r.sessionbuilder_authToken(this.__wbg_ptr,t,_);return w.__wrap(s)}destination(e){const t=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),_=g,s=r.sessionbuilder_destination(this.__wbg_ptr,t,_);return w.__wrap(s)}desktopSize(e){E(e,S);var t=e.__destroy_into_raw();const _=r.sessionbuilder_desktopSize(this.__wbg_ptr,t);return w.__wrap(_)}proxyAddress(e){const t=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),_=g,s=r.sessionbuilder_proxyAddress(this.__wbg_ptr,t,_);return w.__wrap(s)}renderCanvas(e){const t=r.sessionbuilder_renderCanvas(this.__wbg_ptr,e);return w.__wrap(t)}serverDomain(e){const t=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),_=g,s=r.sessionbuilder_serverDomain(this.__wbg_ptr,t,_);return w.__wrap(s)}canvasResizedCallback(e){const t=r.sessionbuilder_canvasResizedCallback(this.__wbg_ptr,e);return w.__wrap(t)}setCursorStyleCallback(e){const t=r.sessionbuilder_setCursorStyleCallback(this.__wbg_ptr,e);return w.__wrap(t)}forceClipboardUpdateCallback(e){const t=r.sessionbuilder_forceClipboardUpdateCallback(this.__wbg_ptr,e);return w.__wrap(t)}remoteClipboardChangedCallback(e){const t=r.sessionbuilder_remoteClipboardChangedCallback(this.__wbg_ptr,e);return w.__wrap(t)}setCursorStyleCallbackContext(e){const t=r.sessionbuilder_setCursorStyleCallbackContext(this.__wbg_ptr,e);return w.__wrap(t)}constructor(){const e=r.sessionbuilder_create();return this.__wbg_ptr=e>>>0,H.register(this,this.__wbg_ptr,this),this}password(e){const t=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),_=g,s=r.sessionbuilder_password(this.__wbg_ptr,t,_);return w.__wrap(s)}username(e){const t=l(e,r.__wbindgen_malloc,r.__wbindgen_realloc),_=g,s=r.sessionbuilder_username(this.__wbg_ptr,t,_);return w.__wrap(s)}extension(e){E(e,$);var t=e.__destroy_into_raw();const _=r.sessionbuilder_extension(this.__wbg_ptr,t);return w.__wrap(_)}}Symbol.dispose&&(w.prototype[Symbol.dispose]=w.prototype.free);class W{static __wrap(e){e=e>>>0;const t=Object.create(W.prototype);return t.__wbg_ptr=e,be.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,be.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_sessionterminationinfo_free(e,0)}reason(){let e,t;try{const _=r.sessionterminationinfo_reason(this.__wbg_ptr);return e=_[0],t=_[1],f(_[0],_[1])}finally{r.__wbindgen_free(e,t,1)}}}Symbol.dispose&&(W.prototype[Symbol.dispose]=W.prototype.free);const Be=new Set(["basic","cors","default"]);function Ne(n,e){return v(this,null,function*(){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(n,e)}catch(_){if(n.ok&&Be.has(n.type)&&n.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}const t=yield n.arrayBuffer();return yield WebAssembly.instantiate(t,e)}else{const t=yield WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}})}function Je(){const n={};return n.wbg={},n.wbg.__wbg___wbindgen_boolean_get_dea25b33882b895b=function(e){const t=e,_=typeof t=="boolean"?t:void 0;return y(_)?16777215:_?1:0},n.wbg.__wbg___wbindgen_debug_string_adfb662ae34724b6=function(e,t){const _=K(t),s=l(_,r.__wbindgen_malloc,r.__wbindgen_realloc),o=g;d().setInt32(e+4*1,o,!0),d().setInt32(e+4*0,s,!0)},n.wbg.__wbg___wbindgen_is_function_8d400b8b1af978cd=function(e){return typeof e=="function"},n.wbg.__wbg___wbindgen_is_string_704ef9c8fc131030=function(e){return typeof e=="string"},n.wbg.__wbg___wbindgen_is_undefined_f6b95eab589e0269=function(e){return e===void 0},n.wbg.__wbg___wbindgen_number_get_9619185a74197f95=function(e,t){const _=t,s=typeof _=="number"?_:void 0;d().setFloat64(e+8*1,y(s)?0:s,!0),d().setInt32(e+4*0,!y(s),!0)},n.wbg.__wbg___wbindgen_string_get_a2a31e16edf96e42=function(e,t){const _=t,s=typeof _=="string"?_:void 0;var o=y(s)?0:l(s,r.__wbindgen_malloc,r.__wbindgen_realloc),i=g;d().setInt32(e+4*1,i,!0),d().setInt32(e+4*0,o,!0)},n.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(e,t){throw new Error(f(e,t))},n.wbg.__wbg__wbg_cb_unref_87dfb5aaa0cbcea7=function(e){e._wbg_cb_unref()},n.wbg.__wbg_addEventListener_6a82629b3d430a48=function(){return u(function(e,t,_,s){e.addEventListener(f(t,_),s)},arguments)},n.wbg.__wbg_addEventListener_82cddc614107eb45=function(){return u(function(e,t,_,s,o){e.addEventListener(f(t,_),s,o)},arguments)},n.wbg.__wbg_apply_52e9ae668d017009=function(){return u(function(e,t,_){return e.apply(t,_)},arguments)},n.wbg.__wbg_arrayBuffer_c04af4fce566092d=function(){return u(function(e){return e.arrayBuffer()},arguments)},n.wbg.__wbg_call_3020136f7a2d6e44=function(){return u(function(e,t,_){return e.call(t,_)},arguments)},n.wbg.__wbg_call_abb4ff46ce38be40=function(){return u(function(e,t){return e.call(t)},arguments)},n.wbg.__wbg_clearTimeout_5a54f8841c30079a=function(e){return clearTimeout(e)},n.wbg.__wbg_clipboarddata_new=function(e){return x.__wrap(e)},n.wbg.__wbg_clipboarditem_new=function(e){return P.__wrap(e)},n.wbg.__wbg_close_1db3952de1b5b1cf=function(){return u(function(e){e.close()},arguments)},n.wbg.__wbg_code_85a811fe6ca962be=function(e){return e.code},n.wbg.__wbg_data_8bf4ae669a78a688=function(e){return e.data},n.wbg.__wbg_debug_9d0c87ddda3dc485=function(e){console.debug(e)},n.wbg.__wbg_dispatchEvent_50a40ea5c664f9f4=function(){return u(function(e,t){return e.dispatchEvent(t)},arguments)},n.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,t){let _,s;try{_=e,s=t,console.error(f(e,t))}finally{r.__wbindgen_free(_,s,1)}},n.wbg.__wbg_error_7bc7d576a6aaf855=function(e){console.error(e)},n.wbg.__wbg_fetch_a9bc66c159c18e19=function(e){return fetch(e)},n.wbg.__wbg_getContext_01f42b234e833f0a=function(){return u(function(e,t,_){const s=e.getContext(f(t,_));return y(s)?0:k(s)},arguments)},n.wbg.__wbg_getRandomValues_1c61fac11405ffdc=function(){return u(function(e,t){globalThis.crypto.getRandomValues(L(e,t))},arguments)},n.wbg.__wbg_getRandomValues_38a1ff1ea09f6cc7=function(){return u(function(e,t){globalThis.crypto.getRandomValues(L(e,t))},arguments)},n.wbg.__wbg_getTime_ad1e9878a735af08=function(e){return e.getTime()},n.wbg.__wbg_info_ce6bcc489c22f6f0=function(e){console.info(e)},n.wbg.__wbg_instanceof_ArrayBuffer_f3320d2419cd0355=function(e){let t;try{t=e instanceof ArrayBuffer}catch(s){t=!1}return t},n.wbg.__wbg_instanceof_CanvasRenderingContext2d_d070139aaac1459f=function(e){let t;try{t=e instanceof CanvasRenderingContext2D}catch(s){t=!1}return t},n.wbg.__wbg_instanceof_Error_3443650560328fa9=function(e){let t;try{t=e instanceof Error}catch(s){t=!1}return t},n.wbg.__wbg_instanceof_Response_cd74d1c2ac92cb0b=function(e){let t;try{t=e instanceof Response}catch(s){t=!1}return t},n.wbg.__wbg_ironerror_new=function(e){return j.__wrap(e)},n.wbg.__wbg_length_22ac23eaec9d8053=function(e){return e.length},n.wbg.__wbg_message_0305fa7903f4b3d9=function(e){return e.message},n.wbg.__wbg_name_f33243968228ce95=function(e){return e.name},n.wbg.__wbg_new_0_23cedd11d9b40c9d=function(){return new Date},n.wbg.__wbg_new_1ba21ce319a06297=function(){return new Object},n.wbg.__wbg_new_25f239778d6112b9=function(){return new Array},n.wbg.__wbg_new_3205bc992762cf38=function(){return u(function(){return new URLSearchParams},arguments)},n.wbg.__wbg_new_3c79b3bb1b32b7d3=function(){return u(function(){return new Headers},arguments)},n.wbg.__wbg_new_6421f6084cc5bc5a=function(e){return new Uint8Array(e)},n.wbg.__wbg_new_79cb6b4c6069a31e=function(){return u(function(e,t){return new URL(f(e,t))},arguments)},n.wbg.__wbg_new_7c30d1f874652e62=function(){return u(function(e,t){return new WebSocket(f(e,t))},arguments)},n.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},n.wbg.__wbg_new_ff12d2b041fb48f1=function(e,t){try{var _={a:e,b:t},s=(i,a)=>{const c=_.a;_.a=0;try{return $e(c,_.b,i,a)}finally{_.a=c}};return new Promise(s)}finally{_.a=_.b=0}},n.wbg.__wbg_new_from_slice_f9c22b9153b26992=function(e,t){return new Uint8Array(L(e,t))},n.wbg.__wbg_new_no_args_cb138f77cf6151ee=function(e,t){return new Function(f(e,t))},n.wbg.__wbg_new_with_event_init_dict_8ce3ab55b0239ca3=function(){return u(function(e,t,_){return new CloseEvent(f(e,t),_)},arguments)},n.wbg.__wbg_new_with_str_and_init_c5748f76f5108934=function(){return u(function(e,t,_){return new Request(f(e,t),_)},arguments)},n.wbg.__wbg_new_with_str_e8aac3eec73c239d=function(){return u(function(e,t){return new Request(f(e,t))},arguments)},n.wbg.__wbg_new_with_u8_clamped_array_e14490b754099e0e=function(){return u(function(e,t,_){return new ImageData(Oe(e,t),_>>>0)},arguments)},n.wbg.__wbg_ok_dd98ecb60d721e20=function(e){return e.ok},n.wbg.__wbg_prototypesetcall_dfe9b766cdc1f1fd=function(e,t,_){Uint8Array.prototype.set.call(L(e,t),_)},n.wbg.__wbg_push_7d9be8f38fc13975=function(e,t){return e.push(t)},n.wbg.__wbg_putImageData_3c4fbe4167460ba2=function(){return u(function(e,t,_,s,o,i,a,c){e.putImageData(t,_,s,o,i,a,c)},arguments)},n.wbg.__wbg_putImageData_d10bd82b00b97fad=function(){return u(function(e,t,_,s,o,i,a,c){e.putImageData(t,_,s,o,i,a,c)},arguments)},n.wbg.__wbg_queueMicrotask_9b549dfce8865860=function(e){return e.queueMicrotask},n.wbg.__wbg_queueMicrotask_fca69f5bfad613a5=function(e){queueMicrotask(e)},n.wbg.__wbg_readyState_9d0976dcad561aa9=function(e){return e.readyState},n.wbg.__wbg_reason_d4eb9e40592438c2=function(e,t){const _=t.reason,s=l(_,r.__wbindgen_malloc,r.__wbindgen_realloc),o=g;d().setInt32(e+4*1,o,!0),d().setInt32(e+4*0,s,!0)},n.wbg.__wbg_removeEventListener_565e273024b68b75=function(){return u(function(e,t,_,s){e.removeEventListener(f(t,_),s)},arguments)},n.wbg.__wbg_resolve_fd5bfbaa4ce36e1e=function(e){return Promise.resolve(e)},n.wbg.__wbg_search_dbf031078dd8e645=function(e,t){const _=t.search,s=l(_,r.__wbindgen_malloc,r.__wbindgen_realloc),o=g;d().setInt32(e+4*1,o,!0),d().setInt32(e+4*0,s,!0)},n.wbg.__wbg_send_ea59e150ab5ebe08=function(){return u(function(e,t,_){e.send(L(t,_))},arguments)},n.wbg.__wbg_session_new=function(e){return U.__wrap(e)},n.wbg.__wbg_sessionterminationinfo_new=function(e){return W.__wrap(e)},n.wbg.__wbg_setTimeout_db2dbaeefb6f39c7=function(){return u(function(e,t){return setTimeout(e,t)},arguments)},n.wbg.__wbg_set_425eb8b710d5beee=function(){return u(function(e,t,_,s,o){e.set(f(t,_),f(s,o))},arguments)},n.wbg.__wbg_set_binaryType_73e8c75df97825f8=function(e,t){e.binaryType=qe[t]},n.wbg.__wbg_set_body_8e743242d6076a4f=function(e,t){e.body=t},n.wbg.__wbg_set_code_2f1b419c1a6169a3=function(e,t){e.code=t},n.wbg.__wbg_set_headers_5671cf088e114d2b=function(e,t){e.headers=t},n.wbg.__wbg_set_height_6f8f8ef4cb40e496=function(e,t){e.height=t>>>0},n.wbg.__wbg_set_height_afe09c24165867f7=function(e,t){e.height=t>>>0},n.wbg.__wbg_set_method_76c69e41b3570627=function(e,t,_){e.method=f(t,_)},n.wbg.__wbg_set_once_cb88c6a887803dfa=function(e,t){e.once=t!==0},n.wbg.__wbg_set_reason_6cb672258b901b3a=function(e,t,_){e.reason=f(t,_)},n.wbg.__wbg_set_search_cbba29f94329f296=function(e,t,_){e.search=f(t,_)},n.wbg.__wbg_set_width_0a22c810f06a5152=function(e,t){e.width=t>>>0},n.wbg.__wbg_set_width_7ff7a22c6e9f423e=function(e,t){e.width=t>>>0},n.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,t){const _=t.stack,s=l(_,r.__wbindgen_malloc,r.__wbindgen_realloc),o=g;d().setInt32(e+4*1,o,!0),d().setInt32(e+4*0,s,!0)},n.wbg.__wbg_static_accessor_GLOBAL_769e6b65d6557335=function(){const e=typeof global=="undefined"?null:global;return y(e)?0:k(e)},n.wbg.__wbg_static_accessor_GLOBAL_THIS_60cf02db4de8e1c1=function(){const e=typeof globalThis=="undefined"?null:globalThis;return y(e)?0:k(e)},n.wbg.__wbg_static_accessor_SELF_08f5a74c69739274=function(){const e=typeof self=="undefined"?null:self;return y(e)?0:k(e)},n.wbg.__wbg_static_accessor_WINDOW_a8924b26aa92d024=function(){const e=typeof window=="undefined"?null:window;return y(e)?0:k(e)},n.wbg.__wbg_statusText_0eec2bbb2c8f22e2=function(e,t){const _=t.statusText,s=l(_,r.__wbindgen_malloc,r.__wbindgen_realloc),o=g;d().setInt32(e+4*1,o,!0),d().setInt32(e+4*0,s,!0)},n.wbg.__wbg_status_9bfc680efca4bdfd=function(e){return e.status},n.wbg.__wbg_then_429f7caf1026411d=function(e,t,_){return e.then(t,_)},n.wbg.__wbg_then_4f95312d68691235=function(e,t){return e.then(t)},n.wbg.__wbg_toString_14b47ee7542a49ef=function(e){return e.toString()},n.wbg.__wbg_toString_f07112df359c997f=function(e){return e.toString()},n.wbg.__wbg_url_87f30c96ceb3baf7=function(e,t){const _=t.url,s=l(_,r.__wbindgen_malloc,r.__wbindgen_realloc),o=g;d().setInt32(e+4*1,o,!0),d().setInt32(e+4*0,s,!0)},n.wbg.__wbg_warn_6e567d0d926ff881=function(e){console.warn(e)},n.wbg.__wbg_wasClean_4154a2d59fdb4dd7=function(e){return e.wasClean},n.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,t){return f(e,t)},n.wbg.__wbindgen_cast_5290191a1a898ed9=function(e,t){return C(e,t,r.wasm_bindgen_c8569f1c332166b___closure__destroy___dyn_core_f622c628fd7f704e___ops__function__FnMut__web_sys_80a2c3d9e8017199___features__gen_CloseEvent__CloseEvent____Output_______,N)},n.wbg.__wbindgen_cast_53cf626cd1b2234f=function(e,t){return C(e,t,r.wasm_bindgen_c8569f1c332166b___closure__destroy___dyn_core_f622c628fd7f704e___ops__function__FnMut__web_sys_80a2c3d9e8017199___features__gen_CloseEvent__CloseEvent____Output_______,N)},n.wbg.__wbindgen_cast_ba5993ae15eb7ef6=function(e,t){return C(e,t,r.wasm_bindgen_c8569f1c332166b___closure__destroy___dyn_core_f622c628fd7f704e___ops__function__FnMut_____Output_______,Ve)},n.wbg.__wbindgen_cast_d5371d1ddd7b9789=function(e,t){return C(e,t,r.wasm_bindgen_c8569f1c332166b___closure__destroy___dyn_core_f622c628fd7f704e___ops__function__FnMut__web_sys_80a2c3d9e8017199___features__gen_CloseEvent__CloseEvent____Output_______,We)},n.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(e){return e},n.wbg.__wbindgen_cast_de82460c3994ad30=function(e,t){return C(e,t,r.wasm_bindgen_c8569f1c332166b___closure__destroy___dyn_core_f622c628fd7f704e___ops__function__FnMut__wasm_bindgen_c8569f1c332166b___JsValue____Output_______,De)},n.wbg.__wbindgen_cast_e2fa0bb1807edef8=function(e,t){return C(e,t,r.wasm_bindgen_c8569f1c332166b___closure__destroy___dyn_core_f622c628fd7f704e___ops__function__FnMut__web_sys_80a2c3d9e8017199___features__gen_CloseEvent__CloseEvent____Output_______,N)},n.wbg.__wbindgen_init_externref_table=function(){const e=r.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},n}function Ge(n,e){return r=n.exports,fe.__wbindgen_wasm_module=e,F=null,I=null,O=null,r.__wbindgen_start(),r}function fe(n){return v(this,null,function*(){if(r!==void 0)return r;typeof n!="undefined"&&(Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof n=="undefined"&&(n=new URL("./assets/ironrdp_web_bg.40621c9b.wasm",self.location));const e=Je();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:_}=yield Ne(yield n,e);return Ge(t,_)})}const He=me({name:"AgentRdp",components:{PageWrapper:pe},setup(){const{currentRoute:n}=he(),e=ve(()=>n.value.params),{closeCurrent:t,setTitle:_}=Fe(),s=A(null),o=A(null),i=A(!0),a=A(!1),c=A(null);let T={};function ge(){return v(this,null,function*(){try{const b=yield Ae({action:"agentinfo",data:{id:e.value.id}});T=b,_(`RDP - ${b.username}@${b.intranet}`)}catch(b){console.error("Failed to fetch agent info",b)}})}function we(){return v(this,null,function*(){if(!s.value)return;const{apiUrl:b="/manjusaka"}=Le(),D=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${b}/webproxy/rdp/${e.value.id}`,Z=yield new w().username("\\").password("").authToken("").renderCanvas(s.value).proxyAddress(D).connect();c.value=Z,Z.run().then(le=>{c.value=null}).catch(le=>{c.value=null})})}const Y=b=>{i.value=b},de=()=>v(this,null,function*(){if(!!s.value)if(a.value)document.exitFullscreen?yield document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{const b=s.value;if(b.requestFullscreen)yield b.requestFullscreen();else if(b.webkitRequestFullscreen)yield b.webkitRequestFullscreen();else if(b.mozRequestFullScreen)yield b.mozRequestFullScreen();else if(b.msRequestFullscreen)yield b.msRequestFullscreen();else return}}),h=()=>{a.value=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)},m=()=>{if(c.value&&o.value){const b=s.value;if(b){const q=b.clientWidth,D=b.clientHeight-40;o.value.width=q,o.value.height=D;try{c.value.resize(q,D)}catch(Q){console.error("Failed to resize session:",Q)}}}};return Ce(()=>v(this,null,function*(){yield ge(),yield Re(),yield fe(),yield we(),document.addEventListener("fullscreenchange",h),document.addEventListener("webkitfullscreenchange",h),document.addEventListener("mozfullscreenchange",h),document.addEventListener("MSFullscreenChange",h),window.addEventListener("resize",m),document.addEventListener("fullscreenchange",m),document.addEventListener("webkitfullscreenchange",m),document.addEventListener("mozfullscreenchange",m),document.addEventListener("MSFullscreenChange",m)})),ke(()=>{if(c.value){try{c.value.shutdown()}catch(b){console.error("Error shutting down session:",b)}c.value=null}document.removeEventListener("fullscreenchange",h),document.removeEventListener("webkitfullscreenchange",h),document.removeEventListener("mozfullscreenchange",h),document.removeEventListener("MSFullscreenChange",h),document.removeEventListener("fullscreenchange",m),document.removeEventListener("webkitfullscreenchange",m),document.removeEventListener("mozfullscreenchange",m),document.removeEventListener("MSFullscreenChange",m),window.removeEventListener("resize",m)}),{rdpContainerRef:s,canvasRef:o,toggleViewMode:()=>Y(!i.value),setViewMode:Y,viewOnly:i,toggleFullscreen:de,isFullscreen:a,session:c}}}),Ke={id:"rdp-container",ref:"rdpContainerRef"},Xe={id:"btn-container"};function Ye(n,e,t,_,s,o){const i=ee("a-button"),a=ee("PageWrapper");return Ee(),ze(a,{dense:"",contentFullHeight:"",contentBackground:"",fixedHeight:""},{default:te(()=>[ne("div",Ke,[ne("div",Xe,[xe(i,{size:"small",type:"primary",onClick:n.toggleFullscreen},{default:te(()=>[Se(Te(n.isFullscreen?"\u9000\u51FA\u5168\u5C4F":"\u70B9\u51FB\u5168\u5C4F"),1)]),_:1},8,["onClick"])])],512)]),_:1})}var ot=ye(He,[["render",Ye]]);export{ot as default};
