import{B as C,u as b}from"./useTable.64ef5827.js";import{T as g,B as A}from"./useForm.77c27927.js";import{D as B}from"./index.292bc1f2.js";import{aQ as F,b as _,f as h,e as x,aR as n,o as T,z as D,k as r,j as l,m as R,cj as f,q as M}from"./index.ecaec58b.js";import{a as E}from"./index.e472a703.js";import{R as I}from"./RoleModal.1ba89c9f.js";import"./index.7c437fb2.js";import"./index.81d2e3e6.js";import"./index.9c3be20b.js";import"./useSize.37dbc3ba.js";import"./useContentViewHeight.33e9d1e7.js";import"./ArrowLeftOutlined.68372d7a.js";import"./index.d2065cf3.js";import"./FullscreenOutlined.fdf277a8.js";import"./_baseIteratee.95e39a32.js";import"./index.84bf6fd3.js";import"./index.c74c0e50.js";import"./isEqual.07d69833.js";import"./index.42eff1d5.js";import"./useSortable.d7a4a5d8.js";import"./index.5adf4b72.js";import"./index.66a07c9f.js";import"./scrollTo.3f609abf.js";import"./index.09531035.js";import"./download.0a6ebd5a.js";const w=_({name:"ListenManagement",components:{BasicTable:C,RoleModal:I,TableAction:g,Description:B,BasicForm:A},setup(){const e=h({proxys:[]}),{createMessage:o}=M();x();const[c,{openModal:d}]=E(),[m,{reload:a}]=b({title:"\u9700\u8981\u5148\u52A0\u8F7DNPC2\u624D\u80FD\u4F7F\u7528\u96A7\u9053\u4EE3\u7406",columns:[{title:"ID",dataIndex:"id",width:300},{title:"NPC",dataIndex:"agent"},{title:"\u96A7\u9053\u7C7B\u578B",dataIndex:"name"},{title:"\u672C\u5730\u7AEF\u53E3",dataIndex:"local_port"},{title:"\u8FDC\u7A0B\u5730\u5740",dataIndex:"remote_addr"},{title:"\u4EE3\u7406\u9A8C\u8BC1",dataIndex:"username",customRender:({record:t})=>t.username+"/"+t.password}],api:f,showTableSetting:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:100,title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"},fixed:void 0},beforeFetch:function(t){return{action:"proxylist",data:{}}}});function s(){d(!0,{}),a()}function i(t){f({action:"proxystop",data:{id:t.id}}).then(p=>{o.success("\u5220\u9664\u6210\u529F"),a()}).catch(()=>{o.error("\u5220\u9664\u5931\u8D25")})}function u(){a()}return{state:e,registerTablelisten:m,registerModal:c,handleCreate:s,handleDelete:i,handleSuccess:u}}});function S(e,o,c,d,m,a){const s=n("a-button"),i=n("TableAction"),u=n("BasicTable"),t=n("RoleModal");return T(),D("div",null,[r(u,{onRegister:e.registerTablelisten},{toolbar:l(()=>[r(s,{type:"primary",onClick:e.handleCreate},{default:l(()=>[...o[0]||(o[0]=[R(" \u65B0\u5EFA\u96A7\u9053 ",-1)])]),_:1},8,["onClick"])]),action:l(({record:p})=>[r(i,{actions:[{icon:"ant-design:delete-outlined",label:"\u5173\u505C",color:"error",popConfirm:{title:"\u786E\u8BA4\u5220\u9664\u96A7\u9053\uFF1F",confirm:e.handleDelete.bind(null,p)}}]},null,8,["actions"])]),_:1},8,["onRegister"]),r(t,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}var ae=F(w,[["render",S]]);export{ae as default};
